<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
  <head th:replace="fragments::header('board')"></head>
  <body>
    <div th:replace="fragments::menu('board')"></div>

    <main class="container">
      <h2 class="mb-3">게시판 목록</h2>

      <form class="row g-3 float-end" th:action="@{/board/list}">
        <div class="col-auto">
          <label for="searchText" class="visually-hidden">검색</label>
          <input
            type="text"
            class="form-control"
            id="searchText"
            name="searchText"
            placeholder="검색내용 입력"
            th:value="${param.searchText}"
          />
        </div>
        <div class="col-auto">
          <button type="submit" class="btn btn-primary mb-3">검색</button>
        </div>
      </form>

      <h4><b>Total: </b><span th:text="${total}"></span></h4>

      <table class="table table-striped table-hover">
        <colgroup>
          <col width="100px" />
          <col width="300px" />
          <col width="*" />
        </colgroup>
        <thead>
          <tr>
            <th scope="col">No.</th>
            <th scope="col">제목</th>
            <th scope="col">내용</th>
          </tr>
        </thead>
        <tbody>
          <tr th:each="board: ${boards}">
            <td th:text="${board.id}"></td>
            <td>
              <a
                th:text="${board.title}"
                th:href="@{/board/form(id=${board.id})}"
              ></a>
            </td>
            <td th:text="${board.content}"></td>
          </tr>
        </tbody>
      </table>

      <nav aria-label="Page navigation">
        <ul class="pagination justify-content-center">
          <!-- first -->
          <li
            class="page-item"
            th:classappend="${1 == boards.pageable.pageNumber + 1} ? 'disabled'"
          >
            <a
              class="page-link"
              href="#"
              th:href="@{/board/list(page=${0},searchText=${param.searchText})}"
              tabindex="-1"
              aria-disabled="true"
              >처음</a
            >
          </li>

          <!-- prev -->
          <li
            class="page-item"
            th:classappend="${1 == boards.pageable.pageNumber + 1} ? 'disabled'"
          >
            <a
              class="page-link"
              href="#"
              th:href="@{/board/list(page=${boards.pageable.pageNumber - 1},searchText=${param.searchText})}"
              tabindex="-1"
              aria-disabled="true"
              >이전</a
            >
          </li>

          <!-- pageNumber -->
          <li
            class="page-item"
            th:classappend="${i == boards.pageable.pageNumber + 1} ? 'disabled'"
            th:each="i : ${#numbers.sequence(startPage, endPage)}"
          >
            <a
              class="page-link"
              href="#"
              th:href="@{/board/list(page=${i - 1},searchText=${param.searchText})}"
              th:text="${i}"
              >1</a
            >
          </li>

          <!-- next -->
          <li
            class="page-item"
            th:classappend="${boards.totalPages == boards.pageable.pageNumber + 1} ? 'disabled'"
          >
            <a
              class="page-link"
              href="#"
              th:href="@{/board/list(page=${boards.pageable.pageNumber + 1},searchText=${param.searchText})}"
              >다음</a
            >
          </li>

          <!-- last -->
          <li
            class="page-item"
            th:classappend="${boards.pageable.pageNumber == boards.totalPages-1} ? 'disabled'"
          >
            <a
              class="page-link"
              href="#"
              th:href="@{/board/list(page=${boards.totalPages-1},searchText=${param.searchText})}"
              tabindex="-1"
              aria-disabled="true"
              >끝</a
            >
          </li>
        </ul>
      </nav>

      <div class="float-end">
        <a type="button" class="btn btn-primary" th:href="@{/board/form}">
          작성
        </a>
      </div>
    </main>
    <div th:replace="fragments::footer"></div>
  </body>
</html>
